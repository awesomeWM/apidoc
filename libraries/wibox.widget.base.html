<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
    <title>awesome API documentation</title>
    <link rel="stylesheet" href="../ldoc_pale.css" type="text/css" />
</head>
<body>

<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->


<div id="main">


<!-- Menu -->

<div id="navigation">
<br/>
<h1>awesome</h1>

<ul>
  <li><a href="../index.html">Index</a></li>
</ul>

<h2>Contents</h2>
<ul>
<li><a href="#Functions">Functions</a></li>
</ul>


<h2>Libraries</h2>
<ul class="$(kind=='Topics' and '' or 'nowrap'">
  <li><a href="../libraries/awesome.html">awesome</a></li>
  <li><a href="../libraries/awful.client.html">awful.client</a></li>
  <li><a href="../libraries/awful.client.shape.html">awful.client.shape</a></li>
  <li><a href="../libraries/awful.completion.html">awful.completion</a></li>
  <li><a href="../libraries/awful.ewmh.html">awful.ewmh</a></li>
  <li><a href="../libraries/awful.key.html">awful.key</a></li>
  <li><a href="../libraries/awful.keygrabber.html">awful.keygrabber</a></li>
  <li><a href="../libraries/awful.layout.html">awful.layout</a></li>
  <li><a href="../libraries/awful.menu.html">awful.menu</a></li>
  <li><a href="../libraries/awful.mouse.html">awful.mouse</a></li>
  <li><a href="../libraries/awful.mouse.finder.html">awful.mouse.finder</a></li>
  <li><a href="../libraries/awful.placement.html">awful.placement</a></li>
  <li><a href="../libraries/awful.prompt.html">awful.prompt</a></li>
  <li><a href="../libraries/awful.rules.html">awful.rules</a></li>
  <li><a href="../libraries/awful.screen.html">awful.screen</a></li>
  <li><a href="../libraries/awful.tag.html">awful.tag</a></li>
  <li><a href="../libraries/awful.titlebar.html">awful.titlebar</a></li>
  <li><a href="../libraries/awful.tooltip.html">awful.tooltip</a></li>
  <li><a href="../libraries/awful.util.html">awful.util</a></li>
  <li><a href="../libraries/awful.wibox.html">awful.wibox</a></li>
  <li><a href="../libraries/beautiful.html">beautiful</a></li>
  <li><a href="../libraries/beautiful.xresources.html">beautiful.xresources</a></li>
  <li><a href="../libraries/dbus.html">dbus</a></li>
  <li><a href="../libraries/gears.color.html">gears.color</a></li>
  <li><a href="../libraries/gears.debug.html">gears.debug</a></li>
  <li><a href="../libraries/gears.sort.html">gears.sort</a></li>
  <li><a href="../libraries/gears.surface.html">gears.surface</a></li>
  <li><a href="../libraries/gears.timer.html">gears.timer</a></li>
  <li><a href="../libraries/gears.wallpaper.html">gears.wallpaper</a></li>
  <li><a href="../libraries/keygrabber.html">keygrabber</a></li>
  <li><a href="../libraries/lib.awful.spawn.html">lib.awful.spawn</a></li>
  <li><a href="../libraries/menubar.html">menubar</a></li>
  <li><a href="../libraries/menubar.menu_gen.html">menubar.menu_gen</a></li>
  <li><a href="../libraries/menubar.utils.html">menubar.utils</a></li>
  <li><a href="../libraries/mouse.html">mouse</a></li>
  <li><a href="../libraries/mousegrabber.html">mousegrabber</a></li>
  <li><a href="../libraries/naughty.html">naughty</a></li>
  <li><a href="../libraries/naughty.dbus.html">naughty.dbus</a></li>
  <li><a href="../libraries/objects.button.html">objects.button</a></li>
  <li><a href="../libraries/objects.client.html">objects.client</a></li>
  <li><a href="../libraries/objects.drawable.html">objects.drawable</a></li>
  <li><a href="../libraries/objects.drawin.html">objects.drawin</a></li>
  <li><a href="../libraries/objects.key.html">objects.key</a></li>
  <li><a href="../libraries/objects.screen.html">objects.screen</a></li>
  <li><a href="../libraries/objects.window.html">objects.window</a></li>
  <li><a href="../libraries/root.html">root</a></li>
  <li><a href="../libraries/selection.html">selection</a></li>
  <li><a href="../libraries/wibox.hierarchy.html">wibox.hierarchy</a></li>
  <li><strong>wibox.widget.base</strong></li>
</ul>
<h2>Classes</h2>
<ul class="$(kind=='Topics' and '' or 'nowrap'">
  <li><a href="../classes/awful.button.html">awful.button</a></li>
  <li><a href="../classes/awful.widget.button.html">awful.widget.button</a></li>
  <li><a href="../classes/awful.widget.common.html">awful.widget.common</a></li>
  <li><a href="../classes/awful.widget.graph.html">awful.widget.graph</a></li>
  <li><a href="../classes/awful.widget.launcher.html">awful.widget.launcher</a></li>
  <li><a href="../classes/awful.widget.layoutbox.html">awful.widget.layoutbox</a></li>
  <li><a href="../classes/awful.widget.progressbar.html">awful.widget.progressbar</a></li>
  <li><a href="../classes/awful.widget.prompt.html">awful.widget.prompt</a></li>
  <li><a href="../classes/awful.widget.taglist.html">awful.widget.taglist</a></li>
  <li><a href="../classes/awful.widget.tasklist.html">awful.widget.tasklist</a></li>
  <li><a href="../classes/awful.widget.textclock.html">awful.widget.textclock</a></li>
  <li><a href="../classes/button.html">button</a></li>
  <li><a href="../classes/client.html">client</a></li>
  <li><a href="../classes/drawable.html">drawable</a></li>
  <li><a href="../classes/drawin.html">drawin</a></li>
  <li><a href="../classes/gears.cache.html">gears.cache</a></li>
  <li><a href="../classes/gears.matrix.html">gears.matrix</a></li>
  <li><a href="../classes/gears.object.html">gears.object</a></li>
  <li><a href="../classes/key.html">key</a></li>
  <li><a href="../classes/menubar.icon_theme.html">menubar.icon_theme</a></li>
  <li><a href="../classes/menubar.index_theme.html">menubar.index_theme</a></li>
  <li><a href="../classes/screen.html">screen</a></li>
  <li><a href="../classes/signals.html">signals</a></li>
  <li><a href="../classes/tag.html">tag</a></li>
  <li><a href="../classes/wibox.html">wibox</a></li>
  <li><a href="../classes/wibox.drawable.html">wibox.drawable</a></li>
  <li><a href="../classes/wibox.layout.align.html">wibox.layout.align</a></li>
  <li><a href="../classes/wibox.layout.constraint.html">wibox.layout.constraint</a></li>
  <li><a href="../classes/wibox.layout.fixed.html">wibox.layout.fixed</a></li>
  <li><a href="../classes/wibox.layout.flex.html">wibox.layout.flex</a></li>
  <li><a href="../classes/wibox.layout.margin.html">wibox.layout.margin</a></li>
  <li><a href="../classes/wibox.layout.mirror.html">wibox.layout.mirror</a></li>
  <li><a href="../classes/wibox.layout.rotate.html">wibox.layout.rotate</a></li>
  <li><a href="../classes/wibox.widget.background.html">wibox.widget.background</a></li>
  <li><a href="../classes/wibox.widget.imagebox.html">wibox.widget.imagebox</a></li>
  <li><a href="../classes/wibox.widget.keyboardlayout.html">wibox.widget.keyboardlayout</a></li>
  <li><a href="../classes/wibox.widget.textbox.html">wibox.widget.textbox</a></li>
  <li><a href="../classes/xproperties.html">xproperties</a></li>
</ul>
<h2>Documentation</h2>
<ul class="$(kind=='Topics' and '' or 'nowrap'">
  <li><a href="../documentation/00-authors.md.html">Authors</a></li>
  <li><a href="../documentation/01-readme.md.html">Readme</a></li>
  <li><a href="../documentation/02-contributing.md.html">Contributing</a></li>
</ul>

</div>

<div id="content">

<h1>Module <code>wibox.widget.base</code></h1>
<p>
</p>
<p>
</p>
    <h3>Info:</h3>
    <ul>
        <li><strong>Copyright</strong>: 2010 Uli Schlachter</li>
        <li><strong>Release</strong>: master-g017660d</li>
        <li><strong>Author</strong>: Uli Schlachter</li>
    </ul>


<h2><a href="#Functions">Functions</a></h2>
<table class="function_list">
	<tr>
	<td class="name" ><a href="#rect_to_device_geometry">rect_to_device_geometry (cr, x, y, width, height)</a></td>
	<td class="summary">Figure out the geometry in device coordinate space.</td>
	</tr>
	<tr>
	<td class="name" ><a href="#fit_widget">fit_widget (parent, context, widget, width, height)</a></td>
	<td class="summary">Fit a widget for the given available width and height.</td>
	</tr>
	<tr>
	<td class="name" ><a href="#layout_widget">layout_widget (parent, context, widget, width, height)</a></td>
	<td class="summary">Lay out a widget for the given available width and height.</td>
	</tr>
	<tr>
	<td class="name" ><a href="#buttons">buttons (_buttons)</a></td>
	<td class="summary">Set/get a widget&rsquo;s buttons.</td>
	</tr>
	<tr>
	<td class="name" ><a href="#place_widget_via_matrix">place_widget_via_matrix (widget, mat, width, height)</a></td>
	<td class="summary">Create widget placement information.</td>
	</tr>
	<tr>
	<td class="name" ><a href="#place_widget_at">place_widget_at (widget, x, y, width, height)</a></td>
	<td class="summary">Create widget placement information.</td>
	</tr>
	<tr>
	<td class="name" ><a href="#make_widget">make_widget (proxy[, widget_name])</a></td>
	<td class="summary">Create a new widget.</td>
	</tr>
	<tr>
	<td class="name" ><a href="#empty_widget">empty_widget ()</a></td>
	<td class="summary">Generate an empty widget which takes no space and displays nothing</td>
	</tr>
	<tr>
	<td class="name" ><a href="#check_widget">check_widget (widget)</a></td>
	<td class="summary">Do some sanity checking on widget.</td>
	</tr>
</table>

<br/>
<br/>


    <h2 class="section-header "><a name="Functions"></a>Functions</h2>

    <dl class="function">
    <dt>
    <a name = "rect_to_device_geometry"></a>
    <strong>rect_to_device_geometry (cr, x, y, width, height)</strong>
    </dt>
    <dd>
    Figure out the geometry in device coordinate space.  This gives only tight
 bounds if no rotations by non-multiples of 90Â° are used.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">cr</span>


        </li>
        <li><span class="parameter">x</span>


        </li>
        <li><span class="parameter">y</span>


        </li>
        <li><span class="parameter">width</span>


        </li>
        <li><span class="parameter">height</span>


        </li>
    </ul>





</dd>
    <dt>
    <a name = "fit_widget"></a>
    <strong>fit_widget (parent, context, widget, width, height)</strong>
    </dt>
    <dd>
    Fit a widget for the given available width and height.  This calls the
 widget&rsquo;s <code>:fit</code> callback and caches the result for later use. Never call
 <code>:fit</code> directly, but always through this function!


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">parent</span>
         The parent widget which requests this information.
        </li>
        <li><span class="parameter">context</span>
         The context in which we are fit.
        </li>
        <li><span class="parameter">widget</span>
         The widget to fit (this uses widget:fit(width, height)).
        </li>
        <li><span class="parameter">width</span>
         The available width for the widget
        </li>
        <li><span class="parameter">height</span>
         The available height for the widget
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        The width and height that the widget wants to use
    </ol>




</dd>
    <dt>
    <a name = "layout_widget"></a>
    <strong>layout_widget (parent, context, widget, width, height)</strong>
    </dt>
    <dd>
    Lay out a widget for the given available width and height.  This calls the
 widget&rsquo;s <code>:layout</code> callback and caches the result for later use. Never call
 <code>:layout</code> directly, but always through this function! However, normally there
 shouldn&rsquo;t be any reason why you need to use this function.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">parent</span>
         The parent widget which requests this information.
        </li>
        <li><span class="parameter">context</span>
         The context in which we are laid out.
        </li>
        <li><span class="parameter">widget</span>
         The widget to layout (this uses widget:layout(context, width, height)).
        </li>
        <li><span class="parameter">width</span>
         The available width for the widget
        </li>
        <li><span class="parameter">height</span>
         The available height for the widget
        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        The result from the widget&rsquo;s <code>:layout</code> callback.
    </ol>




</dd>
    <dt>
    <a name = "buttons"></a>
    <strong>buttons (_buttons)</strong>
    </dt>
    <dd>
    Set/get a widget&rsquo;s buttons.
 This function is available on widgets created by <a href="../libraries/wibox.widget.base.html#make_widget">make_widget</a>.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">_buttons</span>


        </li>
    </ul>





</dd>
    <dt>
    <a name = "place_widget_via_matrix"></a>
    <strong>place_widget_via_matrix (widget, mat, width, height)</strong>
    </dt>
    <dd>
    Create widget placement information.  This should be used for a widget&rsquo;s
 <code>:layout()</code> callback.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">widget</span>
         The widget that should be placed.
        </li>
        <li><span class="parameter">mat</span>
        <p> A matrix transforming from the parent widget&rsquo;s coordinate</p>

<pre><code>    system. For example, use matrix.create_translate(1, 2) to draw a
    widget at position (1, 2) relative to the parent widget.
</code></pre>

        </li>
        <li><span class="parameter">width</span>
        <p> The width of the widget in its own coordinate system. That is,</p>

<pre><code>    after applying the transformation matrix.
</code></pre>

        </li>
        <li><span class="parameter">height</span>
        <p> The height of the widget in its own coordinate system. That is,</p>

<pre><code>    after applying the transformation matrix.
</code></pre>

        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        An opaque object that can be returned from :layout()
    </ol>




</dd>
    <dt>
    <a name = "place_widget_at"></a>
    <strong>place_widget_at (widget, x, y, width, height)</strong>
    </dt>
    <dd>
    Create widget placement information.  This should be used for a widget&rsquo;s
 <code>:layout()</code> callback.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">widget</span>
         The widget that should be placed.
        </li>
        <li><span class="parameter">x</span>
         The x coordinate for the widget.
        </li>
        <li><span class="parameter">y</span>
         The y coordinate for the widget.
        </li>
        <li><span class="parameter">width</span>
        <p> The width of the widget in its own coordinate system. That is,</p>

<pre><code>    after applying the transformation matrix.
</code></pre>

        </li>
        <li><span class="parameter">height</span>
        <p> The height of the widget in its own coordinate system. That is,</p>

<pre><code>    after applying the transformation matrix.
</code></pre>

        </li>
    </ul>

    <h3>Returns:</h3>
    <ol>

        An opaque object that can be returned from :layout()
    </ol>




</dd>
    <dt>
    <a name = "make_widget"></a>
    <strong>make_widget (proxy[, widget_name])</strong>
    </dt>
    <dd>
    Create a new widget.  All widgets have to be generated via this function so that
the needed signals are added and mouse input handling is set up.</p>

<p>The returned widget will have a :buttons member function that can be used to
register a set of mouse button events with the widget.</p>

<p>To implement your own widget, you can implement some member functions on a
freshly-created widget. Note that all of these functions should be deterministic
in the sense that they will show the same behavior if they are repeatedly called
with the same arguments (same width and height). If your widget is updated and
needs to change, suitable signals have to be emitted. This will be explained
later.</p>

<p>The first callback is :fit. This function is called to select the size of your
widget. The arguments to this function is the available space and it should
return its desired size. Note that this function only provides a hint which is
not necessarily followed. The widget must also be able to draw itself at
different sizes than the one requested.
<pre><code>function widget:fit(context, width, height)
  &mdash; Find the maximum square available
  local m = math.min(width, height)
  return m, m
end</code></pre></p>

<p>The next callback is :draw. As the name suggests, this function is called to
draw the widget. The arguments to this widget are the context that the widget is
drawn in, the cairo context on which it should be drawn and the widget&rsquo;s size.
The cairo context is set up in such a way that the widget as its top-left corner
at (0, 0) and its bottom-right corner at (width, height). In other words, no
special transformation needs to be done. Note that during this callback a
suitable clip will already be applied to the cairo context so that this callback
will not be able to draw outside of the area that was registered for the widget
by the layout that placed this widget. You should not call
<code>cr:reset_clip()</code>, as redraws will not be handled correctly in this
case.
<pre><code>function widget:draw(wibox, cr, width, height)</p>

<pre><code>cr:move_to(0, 0)
cr:line_to(width, height)
cr:move_to(0, height)
cr:line_to(width, 0)
cr:stroke()
</code></pre>

<p>end</code></pre></p>

<p>There are two signals configured for a widget. When the result that :fit would
return changes, the <code>widget::layout_changed</code> signal has to be
emitted. If this actually causes layout changes, the affected areas will be
redrawn. The other signal is <code>widget::redraw_needed</code>. This signal
signals that :draw has to be called to redraw the widget, but it is safe to
assume that :fit does still return the same values as before. If in doubt, you
can emit both signals to be safe.</p>

<p>If your widget only needs to draw something to the screen, the above is all that
is needed. The following callbacks can be used when implementing layouts which
place other widgets on the screen.</p>

<p>The :layout callback is used to figure out which other widgets should be drawn
relative to this widget. Note that it is allowed to place widgets outside of the
extents of your own widget, for example at a negative position or at twice the
size of this widget. Use this mechanism if your widget needs to draw outside of
its own extents. If the result of this callback changes,
<code>widget::layout_changed</code> has to be emitted. You can use <a href="../libraries/wibox.widget.base.html#fit_widget">fit_widget</a>
to call the <code>:fit</code> callback of other widgets. Never call <code>:fit</code> directly!  For
example, if you want to place another widget <code>child</code> inside of your
widget, you can do it like this:
<pre><code>&mdash; For readability
local base = wibox.widget.base
function widget:layout(width, height)</p>

<pre><code>local result = {}
table.insert(result, base.place_widget_at(child, width/2, 0, width/2, height)
return result
</code></pre>

<p>end</code></pre></p>

<p>Finally, if you want to influence how children are drawn, there are four
callbacks available that all get similar arguments:
<pre><code>function widget:before_draw_children(context, cr, width, height)
function widget:after_draw_children(context, cr, width, height)
function widget:before_draw_child(context, index, child, cr, width, height)
function widget:after_draw_child(context, index, child, cr, width, height)</code></pre></p>

<p>All of these are called with the same arguments as the :draw() method. Please
note that a larger clip will be active during these callbacks that also contains
the area of all children. These callbacks can be used to influence the way in
which children are drawn, but they should not cause the drawing to cover a
different area. As an example, these functions can be used to draw children
translucently:
<pre><code>function widget:before_draw_children(wibox, cr, width, height)</p>

<pre><code>cr:push_group()
</code></pre>

<p>end
function widget:after_draw_children(wibox, cr, width, height)</p>

<pre><code>cr:pop_group_to_source()
cr:paint_with_alpha(0.5)
</code></pre>

<p>end</code></pre></p>

<p>In pseudo-code, the call sequence for the drawing callbacks during a redraw
looks like this:
<pre><code>widget:draw(wibox, cr, width, height)
widget:before_draw_children(wibox, cr, width, height)
for child do</p>

<pre><code>widget:before_draw_child(wibox, cr, child_index, child, width, height)
cr:save()
-- Draw child and all of its children recursively, taking into account the
-- position and size given to base.place_widget_at() in :layout().
cr:restore()
widget:after_draw_child(wibox, cr, child_index, child, width, height)
</code></pre>

<p>end
widget:after_draw_children(wibox, cr, width, height)</code></pre>


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">proxy</span>
        <p> If this is set, the returned widget will be a proxy for this</p>

<pre><code>         widget. It will be equivalent to this widget. This means it
         looks the same on the screen.
</code></pre>

        </li>
        <li><span class="parameter">widget_name</span>
            <span class="types"><a class="type" href="http://www.lua.org/manual/5.2/manual.html#6.4">string</a></span>
        <p> Name of the widget.  If not set, it will be</p>

<pre><code>         set automatically via &lt;a href="../classes/gears.object.html#gears.object:modulename"&gt;gears.object.modulename&lt;/a&gt;.
</code></pre>

         (<em>optional</em>)
        </li>
    </ul>



    <h3>See also:</h3>
    <ul>
         <a href="../libraries/wibox.widget.base.html#fit_widget">fit_widget</a>
    </ul>


</dd>
    <dt>
    <a name = "empty_widget"></a>
    <strong>empty_widget ()</strong>
    </dt>
    <dd>
    Generate an empty widget which takes no space and displays nothing







</dd>
    <dt>
    <a name = "check_widget"></a>
    <strong>check_widget (widget)</strong>
    </dt>
    <dd>
    Do some sanity checking on widget.  This function raises a lua error if
 widget is not a valid widget.


    <h3>Parameters:</h3>
    <ul>
        <li><span class="parameter">widget</span>


        </li>
    </ul>





</dd>
</dl>


</div> <!-- id="content" -->
</div> <!-- id="main" -->
<div id="about">
<i>generated by <a href="http://github.com/stevedonovan/LDoc">LDoc 1.4.3</a></i>
<i style="float:right;">Last updated 2015-10-13 10:41:26 </i>
</div> <!-- id="about" -->
</div> <!-- id="container" -->
</body>
</html>
